flowchart LR
    classDef router fill:#1f78b4,stroke:#0b3558,color:#ffffff;

    subgraph Azure
        az_ext["az-ext"]:::router
        az_out["az-out\nwan 201.255.0.3/24\nout 201.0.0.1/24\ndren 100.255.0.1/24"]:::router
        az_grey["az-grey"]:::router
        az_inside["az-inside\n(201.1.0.0/24, 201.1.1.0/24)"]:::router
        az_dev["az-dev\n(201.1.2.0/24, 201.1.3.0/24)"]:::router
        az_sandbox["az-sandbox\n(201.1.4.0/24)"]:::router
        internet[("Internet")]

        az_ext <--> |"ext 201.254.0.0/24"| internet
        az_ext <--> |"wan 201.255.0.0/24"| az_out
        az_out <--> |"out 201.0.0.0/24"| az_grey
        az_grey <--> |"sdpc 201.0.1.0/24"| az_inside
        az_grey <--> |"sdpc 201.0.1.0/24"| az_dev
        az_grey <--> |"sdpc 201.0.1.0/24"| az_sandbox
        az_inside --- |"domain 201.1.0.0/24"| az_domain["Domain"]
        az_inside --- |"domsvc 201.1.1.0/24"| az_domsvc["DomSvc"]
        az_dev --- |"dev 201.1.2.0/24"| az_devnet["Dev"]
        az_dev --- |"devsvc 201.1.3.0/24"| az_devsvc["DevSvc"]
        az_sandbox --- |"seg 201.1.4.0/24"| az_seg["Seg"]
        az_grey --- |"sdpg 201.0.2.0/24"| az_sdpg["SDPG segment"]
        az_grey --- |"sdpt 201.0.3.0/24"| az_sdpt["SDPT segment"]
        az_grey --- |"avd 201.0.4.0/24"| az_avd["AVD segment"]
    end

    subgraph OnPrem
        onp_out["onp-out\nout 202.0.0.1/24\ndren 100.255.0.2/24\next 202.254.0.2/24"]:::router
        onp_grey["onp-grey"]:::router
        onp_inside["onp-inside\n(202.1.0.0/24, 202.1.1.0/24)"]:::router
        onp_dev["onp-dev\n(202.1.2.0/24, 202.1.3.0/24)"]:::router
        onp_sandbox["onp-sandbox\n(202.1.4.0/24, 202.1.5.0/24)"]:::router

        onp_grey <--> |"out 202.0.0.0/24"| onp_out
        onp_grey <--> |"sdpc 202.0.1.0/24"| onp_inside
        onp_grey <--> |"sdpc 202.0.1.0/24"| onp_dev
        onp_grey <--> |"sdpc 202.0.1.0/24"| onp_sandbox
        onp_inside --- |"domain 202.1.0.0/24"| onp_domain["Domain"]
        onp_inside --- |"domsvc 202.1.1.0/24"| onp_domsvc["DomSvc"]
        onp_dev --- |"dev 202.1.2.0/24"| onp_devnet["Dev"]
        onp_dev --- |"devsvc 202.1.3.0/24"| onp_devsvc["DevSvc"]
        onp_sandbox --- |"seg 202.1.4.0/24"| onp_seg["Seg"]
        onp_sandbox --- |"hwil 202.1.5.0/24"| onp_hwil["HWIL"]
        onp_grey --- |"sdpg 202.0.2.0/24"| onp_sdpg["SDPG segment"]
        onp_grey --- |"sdpt 202.0.3.0/24"| onp_sdpt["SDPT segment"]
        onp_grey --- |"avd 202.0.4.0/24"| onp_avd["AVD segment"]
    end

    onp_out ===|"dren 100.255.0.0/24 (restricted; no site routes)"| az_out
