flowchart TB
  BYOD[External BYOD User]
  AVD[AVD Clients<br>Appgate Client/Agent]
  GW1[SDPG Gateway]
  GW2[SDPT Connector]
  CTRL[SDPC Controller]
  PR[Protected Resources<br>Inside + Dev + SEG]

  BYOD -->|AVD access Microsoft AVD broker/control plane| AVD
  AVD -->|tcp/udp 443 + udp 53| CTRL
  AVD -->|tcp/udp 443 + udp 53| GW1
  CTRL -->|tcp/udp 443 + udp 53| GW1
  CTRL -->|tcp/udp 443 + udp 53| GW2
  AVD -->|tcp/udp 443 + udp 53| GW2
  GW1 -->|All Ports| PR
  GW2 -->|All Ports| PR

  class CTRL,GW1,GW2 sdp
  classDef sdp fill:#d7f3ff,stroke:#1f7ea8,stroke-width:2px,color:#0b3d59

  class BYOD enduser
  classDef enduser fill:#ffe9d6,stroke:#e07a2c,stroke-width:2px,color:#5a2a00

  class AVD client
  classDef client fill:#e6f7e6,stroke:#2f8f2f,stroke-width:2px,color:#0f3d0f

  class PR,DOMAIN,DEV,SEG sdpg
  classDef sdpg fill:#f0e6ff,stroke:#6f3cc3,stroke-width:2px,color:#2a0e5a

  class DOMSVC,DEVSVC,HWIL sdpt
  classDef sdpt fill:#f1f700,stroke:#6f3cc3,stroke-width:2px,color:#2a0e5a
 
